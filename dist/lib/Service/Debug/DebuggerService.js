"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const store = require("store2");
const TonicService_1 = require("../TonicService");
class DebuggerService extends TonicService_1.default {
    constructor() {
        super();
        this.detect();
    }
    get status() {
        return this.enabled || false;
    }
    set status(status) {
        const $root = window.document.documentElement;
        this.enabled = Boolean(status);
        $root.classList[this.enabled ? "add" : "remove"]("debug-mode");
        store.set("debug", this.enabled);
    }
    detect() {
        const match = window.location.href.match(/debug=(\d|true|false)/i);
        try {
            this.status = JSON.parse(store.get("debug"));
        }
        catch (e) {
            this.status = false;
        }
        if (match) {
            const status = match[1].toLowerCase();
            this.status = status === "1" || status === "true";
        }
    }
    log(message, typeId = DebuggerService.CORE) {
        if (this.status === false) {
            return;
        }
        const output = [];
        const styles = [];
        const type = DebuggerService.TYPE[typeId];
        output.push(`%c${type.emoji}`);
        styles.push(["margin: 0 10px 0 -1.5em"].join(";"));
        output.push(`%c${message}`);
        styles.push(["font-weight: normal", "text-transform: none"].join(";"));
        console.log(output.join(""), ...styles);
    }
    warn(message, options = DebuggerService.WARNING) {
        this.log(message, options);
    }
    error(message, options = DebuggerService.ERROR) {
        this.log(message, options);
    }
    static get TYPE() {
        return [{
                emoji: "üçè",
            }, {
                emoji: "üé≤",
            }, {
                emoji: "üî•",
            }, {
                emoji: "‚ö†Ô∏è",
            }, {
                emoji: "üëçüèª",
            }];
    }
    static get CORE() { return 0; }
    static get ERROR() { return 2; }
    static get WARNING() { return 3; }
}
exports.DebuggerService = DebuggerService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVidWdnZXJTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2pzL3NyYy9TZXJ2aWNlL0RlYnVnL0RlYnVnZ2VyU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGdDQUFnQztBQUNoQyxrREFBMkM7QUFTM0MscUJBQTZCLFNBQVEsc0JBQVk7SUFHN0M7UUFDSSxLQUFLLEVBQUUsQ0FBQztRQUVSLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNsQixDQUFDO0lBT0QsSUFBSSxNQUFNO1FBQ04sTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDO0lBQ2pDLENBQUM7SUFPRCxJQUFJLE1BQU0sQ0FBQyxNQUFNO1FBQ2IsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUM7UUFFOUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7UUFHL0IsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBSS9ELEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBT00sTUFBTTtRQUNULE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBR25FLElBQUksQ0FBQztZQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDakQsQ0FBQztRQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDVCxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUN4QixDQUFDO1FBR0QsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNSLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUV0QyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sS0FBSyxHQUFHLElBQUksTUFBTSxLQUFLLE1BQU0sQ0FBQztRQUN0RCxDQUFDO0lBQ0wsQ0FBQztJQVFNLEdBQUcsQ0FBQyxPQUFlLEVBQUUsU0FBaUIsZUFBZSxDQUFDLElBQUk7UUFDN0QsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLE1BQU0sQ0FBQztRQUNYLENBQUM7UUFFRCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDbEIsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBR2xCLE1BQU0sSUFBSSxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFHMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBU25ELE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQzVCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxxQkFBcUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBR3ZFLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFRTSxJQUFJLENBQUMsT0FBZSxFQUFFLE9BQU8sR0FBRyxlQUFlLENBQUMsT0FBTztRQUMxRCxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBUU0sS0FBSyxDQUFDLE9BQWUsRUFBRSxPQUFPLEdBQUcsZUFBZSxDQUFDLEtBQUs7UUFDekQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELE1BQU0sS0FBSyxJQUFJO1FBQ1gsTUFBTSxDQUFDLENBQUM7Z0JBQ0osS0FBSyxFQUFFLElBQUk7YUFDZCxFQUFFO2dCQUNDLEtBQUssRUFBRSxJQUFJO2FBQ2QsRUFBRTtnQkFDQyxLQUFLLEVBQUUsSUFBSTthQUNkLEVBQUU7Z0JBQ0MsS0FBSyxFQUFFLElBQUk7YUFDZCxFQUFFO2dCQUNDLEtBQUssRUFBRSxNQUFNO2FBQ2hCLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxNQUFNLEtBQUssSUFBSSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRS9CLE1BQU0sS0FBSyxLQUFLLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEMsTUFBTSxLQUFLLE9BQU8sS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUVyQztBQXJJRCwwQ0FxSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBzdG9yZSBmcm9tIFwic3RvcmUyXCI7XG5pbXBvcnQgVG9uaWNTZXJ2aWNlIGZyb20gXCIuLi9Ub25pY1NlcnZpY2VcIjtcblxuLyoqXG4gKiBUaGUgRGVidWdnZXIgY29tcG9uZW50IGlzIGEgc2ltcGxlIGRlYnVnZ2luZyBoZWxwZXIuIFVzZSBpdCBmb3IgZXhhbXBsZSB0b1xuICogbG9nIG1lc3NhZ2VzIHRvIHRoZSBjbGllbnQgd2hpY2ggd2lsbCBvbmx5IGJlIHByaW50ZWQgd2hlbiBpbiBkZWJ1ZyBtb2RlLlxuICpcbiAqIFRPRE86IHRha2VuIGZyb20gZXM2LCB0cmFuc2Zvcm0gdG8gcHVyZSB0eXBlc2NyaXB0XG4gKi9cbi8vIHRzbGludDpkaXNhYmxlXG5leHBvcnQgY2xhc3MgRGVidWdnZXJTZXJ2aWNlIGV4dGVuZHMgVG9uaWNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIGVuYWJsZWQ6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICB0aGlzLmRldGVjdCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBkZWJ1Z2dpbmcgaXMgZW5hYmxlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgc3RhdHVzKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVkIHx8IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuYWJsZXMgb3IgZGlzYWJsZXMgZGVidWdnaW5nIG91dHB1dC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RhdHVzXG4gICAgICovXG4gICAgc2V0IHN0YXR1cyhzdGF0dXMpIHtcbiAgICAgICAgY29uc3QgJHJvb3QgPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgICAgIHRoaXMuZW5hYmxlZCA9IEJvb2xlYW4oc3RhdHVzKTtcblxuICAgICAgICAvLyBEZWxlZ2F0ZSBzdGF0dXMgdG8gQ1NTIGFzIHdlbGxcbiAgICAgICAgJHJvb3QuY2xhc3NMaXN0W3RoaXMuZW5hYmxlZCA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXShcImRlYnVnLW1vZGVcIik7XG5cbiAgICAgICAgLy8gSWYgbG9jYWxTdG9yYWdlIGlzIGF2YWlsYWJsZSwgd3JpdGUgdGhlIGN1cnJlbnQgc3RhdHVzIGludG8gaXQuIE5vdGUgdGhhdCBhIGZha2Ugc3RvcmUgaXMgdXNlZCBpZlxuICAgICAgICAvLyBpdCBpcyBub3QgYXZhaWxhYmxlXG4gICAgICAgIHN0b3JlLnNldChcImRlYnVnXCIsIHRoaXMuZW5hYmxlZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZWN0cyBmcm9tIHRoZSBjdXJyZW50IHJlcXVlc3QgdXJsIGlmIGRlYnVnZ2luZyBpcyBlbmFibGVkIG9yIG5vdCwgaWZcbiAgICAgKiB0aGVyZSBpcyBub3RoaW5nIGRlZmluZWQgd2l0aGluIHRoZSByZXF1ZXN0IGl0IHdpbGwgY2hlY2sgdGhlXG4gICAgICogbG9jYWxTdG9yYWdlIGZvciBhbnkgZGF0YS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZGV0ZWN0KCkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKC9kZWJ1Zz0oXFxkfHRydWV8ZmFsc2UpL2kpO1xuXG4gICAgICAgIC8vIFRyeSB0byBnZXQgZGVidWdnaW5nIHN0YXR1cyBmcm9tIGxvY2FsU3RvcmFnZVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBKU09OLnBhcnNlKHN0b3JlLmdldChcImRlYnVnXCIpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIGhhdmUgYSBuZXcgc3RhdHVzLCBvdmVycmlkZSBpdFxuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzID09PSBcIjFcIiB8fCBzdGF0dXMgPT09IFwidHJ1ZVwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9ncyBhIG1lc3NhZ2UgdG8gdGhlIGNsaWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdHlwZUlkXG4gICAgICovXG4gICAgcHVibGljIGxvZyhtZXNzYWdlOiBzdHJpbmcsIHR5cGVJZDogbnVtYmVyID0gRGVidWdnZXJTZXJ2aWNlLkNPUkUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuXG4gICAgICAgIC8vIFByaW1pdGl2ZSB0eXBlIGdpdmVuPyBQaWNrIGNvcnJlY3QgdHlwZSBvYmplY3QgZnJvbSB0eXBlcyB0YWJsZVxuICAgICAgICBjb25zdCB0eXBlID0gRGVidWdnZXJTZXJ2aWNlLlRZUEVbdHlwZUlkXTtcblxuICAgICAgICAvLyBFbW9qaVxuICAgICAgICBvdXRwdXQucHVzaChgJWMke3R5cGUuZW1vaml9YCk7XG4gICAgICAgIHN0eWxlcy5wdXNoKFtcIm1hcmdpbjogMCAxMHB4IDAgLTEuNWVtXCJdLmpvaW4oXCI7XCIpKTtcblxuICAgICAgICAvLyAvLyBJZiB0aGVyZSBpcyBhIGxhYmVsIGdpdmVuLCBhZGQgaXRcbiAgICAgICAgLy8gaWYgKG9wdGlvbnMubGFiZWwpIHtcbiAgICAgICAgLy8gICAgIG91dHB1dC5wdXNoKGAlY1ske29wdGlvbnMubGFiZWx9XWApO1xuICAgICAgICAvLyAgICAgc3R5bGVzLnB1c2goW1wibWFyZ2luLXJpZ2h0OiA2cHhcIiwgXCJmb250LXdlaWdodDogYm9sZFwiLCBcInRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2VcIl0uam9pbihcIjtcIikpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gTWVzc2FnZVxuICAgICAgICBvdXRwdXQucHVzaChgJWMke21lc3NhZ2V9YCk7XG4gICAgICAgIHN0eWxlcy5wdXNoKFtcImZvbnQtd2VpZ2h0OiBub3JtYWxcIiwgXCJ0ZXh0LXRyYW5zZm9ybTogbm9uZVwiXS5qb2luKFwiO1wiKSk7XG5cbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgIGNvbnNvbGUubG9nKG91dHB1dC5qb2luKFwiXCIpLCAuLi5zdHlsZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHBhcmFtIHtvYmplY3R8bnVtYmVyfSBvcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMgZm9yIGNoYW5naW5nIHRoZSB3YXkgb2YgbG9nZ2luZy5cbiAgICAgKi9cbiAgICBwdWJsaWMgd2FybihtZXNzYWdlOiBzdHJpbmcsIG9wdGlvbnMgPSBEZWJ1Z2dlclNlcnZpY2UuV0FSTklORykge1xuICAgICAgICB0aGlzLmxvZyhtZXNzYWdlLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGFuIGVycm9yIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHBhcmFtIHtvYmplY3R8bnVtYmVyfSBvcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMgZm9yIGNoYW5naW5nIHRoZSB3YXkgb2YgbG9nZ2luZy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBvcHRpb25zID0gRGVidWdnZXJTZXJ2aWNlLkVSUk9SKSB7XG4gICAgICAgIHRoaXMubG9nKG1lc3NhZ2UsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgVFlQRSgpIHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICBlbW9qaTogXCLtoLztvY9cIixcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZW1vamk6IFwi7aC87b6yXCIsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGVtb2ppOiBcIu2gve20pVwiLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBlbW9qaTogXCLimqDvuI9cIixcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZW1vamk6IFwi7aC97bGN7aC87b+7XCIsXG4gICAgICAgIH1dO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgQ09SRSgpIHsgcmV0dXJuIDA7IH1cbiAgICAvLyBzdGF0aWMgZ2V0IENPTVBPTkVOVCgpIHsgcmV0dXJuIDE7IH1cbiAgICBzdGF0aWMgZ2V0IEVSUk9SKCkgeyByZXR1cm4gMjsgfVxuICAgIHN0YXRpYyBnZXQgV0FSTklORygpIHsgcmV0dXJuIDM7IH1cbiAgICAvLyBzdGF0aWMgZ2V0IFNVQ0NFU1MoKSB7IHJldHVybiA0OyB9XG59XG4vLyB0c2xpbnQ6ZW5hYmxlXG4iXX0=