"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const store = require("store2");
const TonicService_1 = require("./TonicService");
class DebuggerService extends TonicService_1.TonicService {
    constructor() {
        super();
    }
    get status() {
        return this.enabled || false;
    }
    set status(status) {
        const $root = window.document.documentElement;
        this.enabled = Boolean(status);
        $root.classList[this.enabled ? "add" : "remove"]("debug-mode");
        store.set("debug", this.enabled);
    }
    detect() {
        const match = window.location.href.match(/debug=(\d|true|false)/i);
        try {
            this.status = JSON.parse(store.get("debug"));
        }
        catch (e) {
            this.status = false;
        }
        if (match) {
            const status = match[1].toLowerCase();
            this.status = status === "1" || status === "true";
        }
    }
    log(message, options = DebuggerService.CORE) {
        if (this.status === false) {
            return;
        }
        const output = [];
        const styles = [];
        const type = (typeof options === "number" ? DebuggerService.TYPE[options] : options.type) || {};
        output.push(`%c${type.emoji}`);
        styles.push(["margin: 0 10px 0 -1.5em"].join(";"));
        if (options.label) {
            output.push(`%c[${options.label}]`);
            styles.push(["margin-right: 6px", "font-weight: bold", "text-transform: uppercase"].join(";"));
        }
        output.push(`%c${message}`);
        styles.push(["font-weight: normal", "text-transform: none"].join(";"));
        console.log(output.join(""), ...styles);
    }
    warn(message, options = DebuggerService.WARNING) {
        this.log(message, options);
    }
    error(message, options = DebuggerService.ERROR) {
        this.log(message, options);
    }
    static get TYPE() {
        return [{
                emoji: "üçè",
            }, {
                emoji: "üé≤",
            }, {
                emoji: "üî•",
            }, {
                emoji: "‚ö†Ô∏è",
            }, {
                emoji: "üëçüèª",
            }];
    }
    static get CORE() { return 0; }
    static get ERROR() { return 2; }
    static get WARNING() { return 3; }
}
exports.DebuggerService = DebuggerService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVidWdnZXJTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL3NyYy9TZXJ2aWNlL0RlYnVnZ2VyU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGdDQUFnQztBQUNoQyxpREFBNEM7QUFRNUMscUJBQTZCLFNBQVEsMkJBQVk7SUFHN0M7UUFDSSxLQUFLLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFPRCxJQUFJLE1BQU07UUFDTixNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxLQUFLLENBQUM7SUFDakMsQ0FBQztJQU9ELElBQUksTUFBTSxDQUFDLE1BQU07UUFDYixNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQztRQUU5QyxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUcvQixLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUM7UUFJL0QsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFPTSxNQUFNO1FBQ1QsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUM7UUFHbkUsSUFBSSxDQUFDO1lBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNqRCxDQUFDO1FBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNULElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3hCLENBQUM7UUFHRCxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ1IsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBRXRDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxLQUFLLEdBQUcsSUFBSSxNQUFNLEtBQUssTUFBTSxDQUFDO1FBQ3RELENBQUM7SUFDTCxDQUFDO0lBUU0sR0FBRyxDQUFDLE9BQWUsRUFBRSxVQUFlLGVBQWUsQ0FBQyxJQUFJO1FBQzNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQztZQUN4QixNQUFNLENBQUM7UUFDWCxDQUFDO1FBRUQsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUdsQixNQUFNLElBQUksR0FBRyxDQUFDLE9BQU8sT0FBTyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUdoRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDL0IsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLHlCQUF5QixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFHbkQsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDaEIsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLE9BQU8sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ25HLENBQUM7UUFHRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssT0FBTyxFQUFFLENBQUMsQ0FBQztRQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMscUJBQXFCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUd2RSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBUU0sSUFBSSxDQUFDLE9BQWUsRUFBRSxPQUFPLEdBQUcsZUFBZSxDQUFDLE9BQU87UUFDMUQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQVFNLEtBQUssQ0FBQyxPQUFlLEVBQUUsT0FBTyxHQUFHLGVBQWUsQ0FBQyxLQUFLO1FBQ3pELElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCxNQUFNLEtBQUssSUFBSTtRQUNYLE1BQU0sQ0FBQyxDQUFDO2dCQUNKLEtBQUssRUFBRSxJQUFJO2FBQ2QsRUFBRTtnQkFDQyxLQUFLLEVBQUUsSUFBSTthQUNkLEVBQUU7Z0JBQ0MsS0FBSyxFQUFFLElBQUk7YUFDZCxFQUFFO2dCQUNDLEtBQUssRUFBRSxJQUFJO2FBQ2QsRUFBRTtnQkFDQyxLQUFLLEVBQUUsTUFBTTthQUNoQixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsTUFBTSxLQUFLLElBQUksS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUUvQixNQUFNLEtBQUssS0FBSyxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLE1BQU0sS0FBSyxPQUFPLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FFckM7QUFuSUQsMENBbUlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgc3RvcmUgZnJvbSBcInN0b3JlMlwiO1xuaW1wb3J0IHtUb25pY1NlcnZpY2V9IGZyb20gXCIuL1RvbmljU2VydmljZVwiO1xuXG4vKipcbiAqIFRoZSBEZWJ1Z2dlciBjb21wb25lbnQgaXMgYSBzaW1wbGUgZGVidWdnaW5nIGhlbHBlci4gVXNlIGl0IGZvciBleGFtcGxlIHRvXG4gKiBsb2cgbWVzc2FnZXMgdG8gdGhlIGNsaWVudCB3aGljaCB3aWxsIG9ubHkgYmUgcHJpbnRlZCB3aGVuIGluIGRlYnVnIG1vZGUuXG4gKlxuICogVE9ETzogdGFrZW4gZnJvbSBlczYsIHRyYW5zZm9ybSB0byBwdXJlIHR5cGVzY3JpcHRcbiAqL1xuZXhwb3J0IGNsYXNzIERlYnVnZ2VyU2VydmljZSBleHRlbmRzIFRvbmljU2VydmljZSB7XG4gICAgcHJpdmF0ZSBlbmFibGVkOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGRlYnVnZ2luZyBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuYWJsZWQgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyBvciBkaXNhYmxlcyBkZWJ1Z2dpbmcgb3V0cHV0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzdGF0dXNcbiAgICAgKi9cbiAgICBzZXQgc3RhdHVzKHN0YXR1cykge1xuICAgICAgICBjb25zdCAkcm9vdCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgdGhpcy5lbmFibGVkID0gQm9vbGVhbihzdGF0dXMpO1xuXG4gICAgICAgIC8vIERlbGVnYXRlIHN0YXR1cyB0byBDU1MgYXMgd2VsbFxuICAgICAgICAkcm9vdC5jbGFzc0xpc3RbdGhpcy5lbmFibGVkID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKFwiZGVidWctbW9kZVwiKTtcblxuICAgICAgICAvLyBJZiBsb2NhbFN0b3JhZ2UgaXMgYXZhaWxhYmxlLCB3cml0ZSB0aGUgY3VycmVudCBzdGF0dXMgaW50byBpdC4gTm90ZSB0aGF0IGEgZmFrZSBzdG9yZSBpcyB1c2VkIGlmXG4gICAgICAgIC8vIGl0IGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgc3RvcmUuc2V0KFwiZGVidWdcIiwgdGhpcy5lbmFibGVkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3RzIGZyb20gdGhlIGN1cnJlbnQgcmVxdWVzdCB1cmwgaWYgZGVidWdnaW5nIGlzIGVuYWJsZWQgb3Igbm90LCBpZlxuICAgICAqIHRoZXJlIGlzIG5vdGhpbmcgZGVmaW5lZCB3aXRoaW4gdGhlIHJlcXVlc3QgaXQgd2lsbCBjaGVjayB0aGVcbiAgICAgKiBsb2NhbFN0b3JhZ2UgZm9yIGFueSBkYXRhLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZXRlY3QoKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gd2luZG93LmxvY2F0aW9uLmhyZWYubWF0Y2goL2RlYnVnPShcXGR8dHJ1ZXxmYWxzZSkvaSk7XG5cbiAgICAgICAgLy8gVHJ5IHRvIGdldCBkZWJ1Z2dpbmcgc3RhdHVzIGZyb20gbG9jYWxTdG9yYWdlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IEpTT04ucGFyc2Uoc3RvcmUuZ2V0KFwiZGVidWdcIikpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2UgaGF2ZSBhIG5ldyBzdGF0dXMsIG92ZXJyaWRlIGl0XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXMgPT09IFwiMVwiIHx8IHN0YXR1cyA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgbWVzc2FnZSB0byB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fG51bWJlcn0gb3B0aW9ucyBPcHRpb25hbCBvcHRpb25zIGZvciBjaGFuZ2luZyB0aGUgd2F5IG9mIGxvZ2dpbmcuXG4gICAgICovXG4gICAgcHVibGljIGxvZyhtZXNzYWdlOiBzdHJpbmcsIG9wdGlvbnM6IGFueSA9IERlYnVnZ2VyU2VydmljZS5DT1JFKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xuICAgICAgICBjb25zdCBzdHlsZXMgPSBbXTtcblxuICAgICAgICAvLyBQcmltaXRpdmUgdHlwZSBnaXZlbj8gUGljayBjb3JyZWN0IHR5cGUgb2JqZWN0IGZyb20gdHlwZXMgdGFibGVcbiAgICAgICAgY29uc3QgdHlwZSA9ICh0eXBlb2Ygb3B0aW9ucyA9PT0gXCJudW1iZXJcIiA/IERlYnVnZ2VyU2VydmljZS5UWVBFW29wdGlvbnNdIDogb3B0aW9ucy50eXBlKSB8fCB7fTtcblxuICAgICAgICAvLyBFbW9qaVxuICAgICAgICBvdXRwdXQucHVzaChgJWMke3R5cGUuZW1vaml9YCk7XG4gICAgICAgIHN0eWxlcy5wdXNoKFtcIm1hcmdpbjogMCAxMHB4IDAgLTEuNWVtXCJdLmpvaW4oXCI7XCIpKTtcblxuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGxhYmVsIGdpdmVuLCBhZGQgaXRcbiAgICAgICAgaWYgKG9wdGlvbnMubGFiZWwpIHtcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGAlY1ske29wdGlvbnMubGFiZWx9XWApO1xuICAgICAgICAgICAgc3R5bGVzLnB1c2goW1wibWFyZ2luLXJpZ2h0OiA2cHhcIiwgXCJmb250LXdlaWdodDogYm9sZFwiLCBcInRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2VcIl0uam9pbihcIjtcIikpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWVzc2FnZVxuICAgICAgICBvdXRwdXQucHVzaChgJWMke21lc3NhZ2V9YCk7XG4gICAgICAgIHN0eWxlcy5wdXNoKFtcImZvbnQtd2VpZ2h0OiBub3JtYWxcIiwgXCJ0ZXh0LXRyYW5zZm9ybTogbm9uZVwiXS5qb2luKFwiO1wiKSk7XG5cbiAgICAgICAgLy8gbm9pbnNwZWN0aW9uIFRzTGludFxuICAgICAgICBjb25zb2xlLmxvZyhvdXRwdXQuam9pbihcIlwiKSwgLi4uc3R5bGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgd2FybmluZyB0byB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fG51bWJlcn0gb3B0aW9ucyBPcHRpb25hbCBvcHRpb25zIGZvciBjaGFuZ2luZyB0aGUgd2F5IG9mIGxvZ2dpbmcuXG4gICAgICovXG4gICAgcHVibGljIHdhcm4obWVzc2FnZTogc3RyaW5nLCBvcHRpb25zID0gRGVidWdnZXJTZXJ2aWNlLldBUk5JTkcpIHtcbiAgICAgICAgdGhpcy5sb2cobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9ncyBhbiBlcnJvciB0byB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fG51bWJlcn0gb3B0aW9ucyBPcHRpb25hbCBvcHRpb25zIGZvciBjaGFuZ2luZyB0aGUgd2F5IG9mIGxvZ2dpbmcuXG4gICAgICovXG4gICAgcHVibGljIGVycm9yKG1lc3NhZ2U6IHN0cmluZywgb3B0aW9ucyA9IERlYnVnZ2VyU2VydmljZS5FUlJPUikge1xuICAgICAgICB0aGlzLmxvZyhtZXNzYWdlLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IFRZUEUoKSB7XG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgICAgZW1vamk6IFwi7aC87b2PXCIsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGVtb2ppOiBcIu2gvO2+slwiLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBlbW9qaTogXCLtoL3ttKVcIixcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZW1vamk6IFwi4pqg77iPXCIsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGVtb2ppOiBcIu2gve2xje2gvO2/u1wiLFxuICAgICAgICB9XTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IENPUkUoKSB7IHJldHVybiAwOyB9XG4gICAgLy8gc3RhdGljIGdldCBDT01QT05FTlQoKSB7IHJldHVybiAxOyB9XG4gICAgc3RhdGljIGdldCBFUlJPUigpIHsgcmV0dXJuIDI7IH1cbiAgICBzdGF0aWMgZ2V0IFdBUk5JTkcoKSB7IHJldHVybiAzOyB9XG4gICAgLy8gc3RhdGljIGdldCBTVUNDRVNTKCkgeyByZXR1cm4gNDsgfVxufVxuIl19