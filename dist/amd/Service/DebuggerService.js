define(["require", "exports", "store2", "./TonicService"], function (require, exports, store, TonicService_1) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    class DebuggerService extends TonicService_1.TonicService {
        constructor() {
            super();
        }
        get status() {
            return this.enabled || false;
        }
        set status(status) {
            const $root = window.document.documentElement;
            this.enabled = Boolean(status);
            $root.classList[this.enabled ? "add" : "remove"]("debug-mode");
            store.set("debug", this.enabled);
        }
        detect() {
            const match = window.location.href.match(/debug=(\d|true|false)/i);
            try {
                this.status = JSON.parse(store.get("debug"));
            }
            catch (e) {
                this.status = false;
            }
            if (match) {
                const status = match[1].toLowerCase();
                this.status = status === "1" || status === "true";
            }
        }
        log(message, options = DebuggerService.CORE) {
            if (this.status === false) {
                return;
            }
            const output = [];
            const styles = [];
            const type = (typeof options === "number" ? DebuggerService.TYPE[options] : options.type) || {};
            output.push(`%c${type.emoji}`);
            styles.push(["margin: 0 10px 0 -1.5em"].join(";"));
            if (options.label) {
                output.push(`%c[${options.label}]`);
                styles.push(["margin-right: 6px", "font-weight: bold", "text-transform: uppercase"].join(";"));
            }
            output.push(`%c${message}`);
            styles.push(["font-weight: normal", "text-transform: none"].join(";"));
            console.log(output.join(""), ...styles);
        }
        warn(message, options = DebuggerService.WARNING) {
            this.log(message, options);
        }
        error(message, options = DebuggerService.ERROR) {
            this.log(message, options);
        }
        static get TYPE() {
            return [{
                    emoji: "üçè",
                }, {
                    emoji: "üé≤",
                }, {
                    emoji: "üî•",
                }, {
                    emoji: "‚ö†Ô∏è",
                }, {
                    emoji: "üëçüèª",
                }];
        }
        static get CORE() { return 0; }
        static get ERROR() { return 2; }
        static get WARNING() { return 3; }
    }
    exports.DebuggerService = DebuggerService;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVidWdnZXJTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2pzL3NyYy9TZXJ2aWNlL0RlYnVnZ2VyU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7SUFTQSxxQkFBNkIsU0FBUSwyQkFBWTtRQUc3QztZQUNJLEtBQUssRUFBRSxDQUFDO1FBQ1osQ0FBQztRQU9ELElBQUksTUFBTTtZQUNOLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLEtBQUssQ0FBQztRQUNqQyxDQUFDO1FBT0QsSUFBSSxNQUFNLENBQUMsTUFBTTtZQUNiLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDO1lBRTlDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBRy9CLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUkvRCxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckMsQ0FBQztRQU9NLE1BQU07WUFDVCxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQztZQUduRSxJQUFJLENBQUM7Z0JBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNqRCxDQUFDO1lBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDVCxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUN4QixDQUFDO1lBR0QsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDUixNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7Z0JBRXRDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxLQUFLLEdBQUcsSUFBSSxNQUFNLEtBQUssTUFBTSxDQUFDO1lBQ3RELENBQUM7UUFDTCxDQUFDO1FBUU0sR0FBRyxDQUFDLE9BQWUsRUFBRSxVQUFlLGVBQWUsQ0FBQyxJQUFJO1lBQzNELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDeEIsTUFBTSxDQUFDO1lBQ1gsQ0FBQztZQUVELE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNsQixNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFHbEIsTUFBTSxJQUFJLEdBQUcsQ0FBQyxPQUFPLE9BQU8sS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFHaEcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBR25ELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNoQixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sT0FBTyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7Z0JBQ3BDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxtQkFBbUIsRUFBRSxtQkFBbUIsRUFBRSwyQkFBMkIsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQ25HLENBQUM7WUFHRCxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssT0FBTyxFQUFFLENBQUMsQ0FBQztZQUM1QixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMscUJBQXFCLEVBQUUsc0JBQXNCLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUd2RSxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FBQztRQUM1QyxDQUFDO1FBUU0sSUFBSSxDQUFDLE9BQWUsRUFBRSxPQUFPLEdBQUcsZUFBZSxDQUFDLE9BQU87WUFDMUQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDL0IsQ0FBQztRQVFNLEtBQUssQ0FBQyxPQUFlLEVBQUUsT0FBTyxHQUFHLGVBQWUsQ0FBQyxLQUFLO1lBQ3pELElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLENBQUM7UUFFRCxNQUFNLEtBQUssSUFBSTtZQUNYLE1BQU0sQ0FBQyxDQUFDO29CQUNKLEtBQUssRUFBRSxJQUFJO2lCQUNkLEVBQUU7b0JBQ0MsS0FBSyxFQUFFLElBQUk7aUJBQ2QsRUFBRTtvQkFDQyxLQUFLLEVBQUUsSUFBSTtpQkFDZCxFQUFFO29CQUNDLEtBQUssRUFBRSxJQUFJO2lCQUNkLEVBQUU7b0JBQ0MsS0FBSyxFQUFFLE1BQU07aUJBQ2hCLENBQUMsQ0FBQztRQUNQLENBQUM7UUFFRCxNQUFNLEtBQUssSUFBSSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRS9CLE1BQU0sS0FBSyxLQUFLLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEMsTUFBTSxLQUFLLE9BQU8sS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUVyQztJQW5JRCwwQ0FtSUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBzdG9yZSBmcm9tIFwic3RvcmUyXCI7XG5pbXBvcnQge1RvbmljU2VydmljZX0gZnJvbSBcIi4vVG9uaWNTZXJ2aWNlXCI7XG5cbi8qKlxuICogVGhlIERlYnVnZ2VyIGNvbXBvbmVudCBpcyBhIHNpbXBsZSBkZWJ1Z2dpbmcgaGVscGVyLiBVc2UgaXQgZm9yIGV4YW1wbGUgdG9cbiAqIGxvZyBtZXNzYWdlcyB0byB0aGUgY2xpZW50IHdoaWNoIHdpbGwgb25seSBiZSBwcmludGVkIHdoZW4gaW4gZGVidWcgbW9kZS5cbiAqXG4gKiBUT0RPOiB0YWtlbiBmcm9tIGVzNiwgdHJhbnNmb3JtIHRvIHB1cmUgdHlwZXNjcmlwdFxuICovXG5leHBvcnQgY2xhc3MgRGVidWdnZXJTZXJ2aWNlIGV4dGVuZHMgVG9uaWNTZXJ2aWNlIHtcbiAgICBwcml2YXRlIGVuYWJsZWQ6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgZGVidWdnaW5nIGlzIGVuYWJsZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlZCB8fCBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIG9yIGRpc2FibGVzIGRlYnVnZ2luZyBvdXRwdXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHN0YXR1c1xuICAgICAqL1xuICAgIHNldCBzdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgIGNvbnN0ICRyb290ID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICB0aGlzLmVuYWJsZWQgPSBCb29sZWFuKHN0YXR1cyk7XG5cbiAgICAgICAgLy8gRGVsZWdhdGUgc3RhdHVzIHRvIENTUyBhcyB3ZWxsXG4gICAgICAgICRyb290LmNsYXNzTGlzdFt0aGlzLmVuYWJsZWQgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0oXCJkZWJ1Zy1tb2RlXCIpO1xuXG4gICAgICAgIC8vIElmIGxvY2FsU3RvcmFnZSBpcyBhdmFpbGFibGUsIHdyaXRlIHRoZSBjdXJyZW50IHN0YXR1cyBpbnRvIGl0LiBOb3RlIHRoYXQgYSBmYWtlIHN0b3JlIGlzIHVzZWQgaWZcbiAgICAgICAgLy8gaXQgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICBzdG9yZS5zZXQoXCJkZWJ1Z1wiLCB0aGlzLmVuYWJsZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVjdHMgZnJvbSB0aGUgY3VycmVudCByZXF1ZXN0IHVybCBpZiBkZWJ1Z2dpbmcgaXMgZW5hYmxlZCBvciBub3QsIGlmXG4gICAgICogdGhlcmUgaXMgbm90aGluZyBkZWZpbmVkIHdpdGhpbiB0aGUgcmVxdWVzdCBpdCB3aWxsIGNoZWNrIHRoZVxuICAgICAqIGxvY2FsU3RvcmFnZSBmb3IgYW55IGRhdGEuXG4gICAgICovXG4gICAgcHVibGljIGRldGVjdCgpIHtcbiAgICAgICAgY29uc3QgbWF0Y2ggPSB3aW5kb3cubG9jYXRpb24uaHJlZi5tYXRjaCgvZGVidWc9KFxcZHx0cnVlfGZhbHNlKS9pKTtcblxuICAgICAgICAvLyBUcnkgdG8gZ2V0IGRlYnVnZ2luZyBzdGF0dXMgZnJvbSBsb2NhbFN0b3JhZ2VcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gSlNPTi5wYXJzZShzdG9yZS5nZXQoXCJkZWJ1Z1wiKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXZSBoYXZlIGEgbmV3IHN0YXR1cywgb3ZlcnJpZGUgaXRcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cyA9PT0gXCIxXCIgfHwgc3RhdHVzID09PSBcInRydWVcIjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgYSBtZXNzYWdlIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHBhcmFtIHtvYmplY3R8bnVtYmVyfSBvcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMgZm9yIGNoYW5naW5nIHRoZSB3YXkgb2YgbG9nZ2luZy5cbiAgICAgKi9cbiAgICBwdWJsaWMgbG9nKG1lc3NhZ2U6IHN0cmluZywgb3B0aW9uczogYW55ID0gRGVidWdnZXJTZXJ2aWNlLkNPUkUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuXG4gICAgICAgIC8vIFByaW1pdGl2ZSB0eXBlIGdpdmVuPyBQaWNrIGNvcnJlY3QgdHlwZSBvYmplY3QgZnJvbSB0eXBlcyB0YWJsZVxuICAgICAgICBjb25zdCB0eXBlID0gKHR5cGVvZiBvcHRpb25zID09PSBcIm51bWJlclwiID8gRGVidWdnZXJTZXJ2aWNlLlRZUEVbb3B0aW9uc10gOiBvcHRpb25zLnR5cGUpIHx8IHt9O1xuXG4gICAgICAgIC8vIEVtb2ppXG4gICAgICAgIG91dHB1dC5wdXNoKGAlYyR7dHlwZS5lbW9qaX1gKTtcbiAgICAgICAgc3R5bGVzLnB1c2goW1wibWFyZ2luOiAwIDEwcHggMCAtMS41ZW1cIl0uam9pbihcIjtcIikpO1xuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGEgbGFiZWwgZ2l2ZW4sIGFkZCBpdFxuICAgICAgICBpZiAob3B0aW9ucy5sYWJlbCkge1xuICAgICAgICAgICAgb3V0cHV0LnB1c2goYCVjWyR7b3B0aW9ucy5sYWJlbH1dYCk7XG4gICAgICAgICAgICBzdHlsZXMucHVzaChbXCJtYXJnaW4tcmlnaHQ6IDZweFwiLCBcImZvbnQtd2VpZ2h0OiBib2xkXCIsIFwidGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZVwiXS5qb2luKFwiO1wiKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZXNzYWdlXG4gICAgICAgIG91dHB1dC5wdXNoKGAlYyR7bWVzc2FnZX1gKTtcbiAgICAgICAgc3R5bGVzLnB1c2goW1wiZm9udC13ZWlnaHQ6IG5vcm1hbFwiLCBcInRleHQtdHJhbnNmb3JtOiBub25lXCJdLmpvaW4oXCI7XCIpKTtcblxuICAgICAgICAvLyBub2luc3BlY3Rpb24gVHNMaW50XG4gICAgICAgIGNvbnNvbGUubG9nKG91dHB1dC5qb2luKFwiXCIpLCAuLi5zdHlsZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHBhcmFtIHtvYmplY3R8bnVtYmVyfSBvcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMgZm9yIGNoYW5naW5nIHRoZSB3YXkgb2YgbG9nZ2luZy5cbiAgICAgKi9cbiAgICBwdWJsaWMgd2FybihtZXNzYWdlOiBzdHJpbmcsIG9wdGlvbnMgPSBEZWJ1Z2dlclNlcnZpY2UuV0FSTklORykge1xuICAgICAgICB0aGlzLmxvZyhtZXNzYWdlLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGFuIGVycm9yIHRvIHRoZSBjbGllbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBsb2cuXG4gICAgICogQHBhcmFtIHtvYmplY3R8bnVtYmVyfSBvcHRpb25zIE9wdGlvbmFsIG9wdGlvbnMgZm9yIGNoYW5naW5nIHRoZSB3YXkgb2YgbG9nZ2luZy5cbiAgICAgKi9cbiAgICBwdWJsaWMgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBvcHRpb25zID0gRGVidWdnZXJTZXJ2aWNlLkVSUk9SKSB7XG4gICAgICAgIHRoaXMubG9nKG1lc3NhZ2UsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgVFlQRSgpIHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICBlbW9qaTogXCLtoLztvY9cIixcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZW1vamk6IFwi7aC87b6yXCIsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGVtb2ppOiBcIu2gve20pVwiLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBlbW9qaTogXCLimqDvuI9cIixcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZW1vamk6IFwi7aC97bGN7aC87b+7XCIsXG4gICAgICAgIH1dO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgQ09SRSgpIHsgcmV0dXJuIDA7IH1cbiAgICAvLyBzdGF0aWMgZ2V0IENPTVBPTkVOVCgpIHsgcmV0dXJuIDE7IH1cbiAgICBzdGF0aWMgZ2V0IEVSUk9SKCkgeyByZXR1cm4gMjsgfVxuICAgIHN0YXRpYyBnZXQgV0FSTklORygpIHsgcmV0dXJuIDM7IH1cbiAgICAvLyBzdGF0aWMgZ2V0IFNVQ0NFU1MoKSB7IHJldHVybiA0OyB9XG59XG4iXX0=