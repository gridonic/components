import * as store from "store2";
import TonicService from "../TonicService";
export class DebuggerService extends TonicService {
    constructor() {
        super();
        this.detect();
    }
    get status() {
        return this.enabled || false;
    }
    set status(status) {
        const $root = window.document.documentElement;
        this.enabled = Boolean(status);
        $root.classList[this.enabled ? "add" : "remove"]("debug-mode");
        store.set("debug", this.enabled);
    }
    detect() {
        const match = window.location.href.match(/debug=(\d|true|false)/i);
        try {
            this.status = JSON.parse(store.get("debug"));
        }
        catch (e) {
            this.status = false;
        }
        if (match) {
            const status = match[1].toLowerCase();
            this.status = status === "1" || status === "true";
        }
    }
    log(message, typeId = DebuggerService.CORE) {
        if (this.status === false) {
            return;
        }
        const output = [];
        const styles = [];
        const type = DebuggerService.TYPE[typeId];
        output.push(`%c${type.emoji}`);
        styles.push(["margin: 0 10px 0 -1.5em"].join(";"));
        output.push(`%c${message}`);
        styles.push(["font-weight: normal", "text-transform: none"].join(";"));
        console.log(output.join(""), ...styles);
    }
    warn(message, options = DebuggerService.WARNING) {
        this.log(message, options);
    }
    error(message, options = DebuggerService.ERROR) {
        this.log(message, options);
    }
    static get TYPE() {
        return [{
                emoji: "üçè",
            }, {
                emoji: "üé≤",
            }, {
                emoji: "üî•",
            }, {
                emoji: "‚ö†Ô∏è",
            }, {
                emoji: "üëçüèª",
            }];
    }
    static get CORE() { return 0; }
    static get ERROR() { return 2; }
    static get WARNING() { return 3; }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVidWdnZXJTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2pzL3NyYy9TZXJ2aWNlL0RlYnVnL0RlYnVnZ2VyU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssS0FBSyxNQUFNLFFBQVEsQ0FBQztBQUNoQyxPQUFPLFlBQVksTUFBTSxpQkFBaUIsQ0FBQztBQVMzQyxNQUFNLHNCQUF1QixTQUFRLFlBQVk7SUFHN0M7UUFDSSxLQUFLLEVBQUUsQ0FBQztRQUVSLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNsQixDQUFDO0lBT0QsSUFBSSxNQUFNO1FBQ04sTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLElBQUksS0FBSyxDQUFDO0lBQ2pDLENBQUM7SUFPRCxJQUFJLE1BQU0sQ0FBQyxNQUFNO1FBQ2IsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUM7UUFFOUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7UUFHL0IsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBSS9ELEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBT00sTUFBTTtRQUNULE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBR25FLElBQUksQ0FBQztZQUNELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDakQsQ0FBQztRQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDVCxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUN4QixDQUFDO1FBR0QsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNSLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUV0QyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sS0FBSyxHQUFHLElBQUksTUFBTSxLQUFLLE1BQU0sQ0FBQztRQUN0RCxDQUFDO0lBQ0wsQ0FBQztJQVFNLEdBQUcsQ0FBQyxPQUFlLEVBQUUsU0FBaUIsZUFBZSxDQUFDLElBQUk7UUFDN0QsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLE1BQU0sQ0FBQztRQUNYLENBQUM7UUFFRCxNQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDbEIsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBR2xCLE1BQU0sSUFBSSxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFHMUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBU25ELE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQzVCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxxQkFBcUIsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBR3ZFLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLE1BQU0sQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFRTSxJQUFJLENBQUMsT0FBZSxFQUFFLE9BQU8sR0FBRyxlQUFlLENBQUMsT0FBTztRQUMxRCxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBUU0sS0FBSyxDQUFDLE9BQWUsRUFBRSxPQUFPLEdBQUcsZUFBZSxDQUFDLEtBQUs7UUFDekQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELE1BQU0sS0FBSyxJQUFJO1FBQ1gsTUFBTSxDQUFDLENBQUM7Z0JBQ0osS0FBSyxFQUFFLElBQUk7YUFDZCxFQUFFO2dCQUNDLEtBQUssRUFBRSxJQUFJO2FBQ2QsRUFBRTtnQkFDQyxLQUFLLEVBQUUsSUFBSTthQUNkLEVBQUU7Z0JBQ0MsS0FBSyxFQUFFLElBQUk7YUFDZCxFQUFFO2dCQUNDLEtBQUssRUFBRSxNQUFNO2FBQ2hCLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxNQUFNLEtBQUssSUFBSSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRS9CLE1BQU0sS0FBSyxLQUFLLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEMsTUFBTSxLQUFLLE9BQU8sS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztDQUVyQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIHN0b3JlIGZyb20gXCJzdG9yZTJcIjtcbmltcG9ydCBUb25pY1NlcnZpY2UgZnJvbSBcIi4uL1RvbmljU2VydmljZVwiO1xuXG4vKipcbiAqIFRoZSBEZWJ1Z2dlciBjb21wb25lbnQgaXMgYSBzaW1wbGUgZGVidWdnaW5nIGhlbHBlci4gVXNlIGl0IGZvciBleGFtcGxlIHRvXG4gKiBsb2cgbWVzc2FnZXMgdG8gdGhlIGNsaWVudCB3aGljaCB3aWxsIG9ubHkgYmUgcHJpbnRlZCB3aGVuIGluIGRlYnVnIG1vZGUuXG4gKlxuICogVE9ETzogdGFrZW4gZnJvbSBlczYsIHRyYW5zZm9ybSB0byBwdXJlIHR5cGVzY3JpcHRcbiAqL1xuLy8gdHNsaW50OmRpc2FibGVcbmV4cG9ydCBjbGFzcyBEZWJ1Z2dlclNlcnZpY2UgZXh0ZW5kcyBUb25pY1NlcnZpY2Uge1xuICAgIHByaXZhdGUgZW5hYmxlZDogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuZGV0ZWN0KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGRlYnVnZ2luZyBpcyBlbmFibGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBzdGF0dXMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuYWJsZWQgfHwgZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5hYmxlcyBvciBkaXNhYmxlcyBkZWJ1Z2dpbmcgb3V0cHV0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBzdGF0dXNcbiAgICAgKi9cbiAgICBzZXQgc3RhdHVzKHN0YXR1cykge1xuICAgICAgICBjb25zdCAkcm9vdCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgICAgICAgdGhpcy5lbmFibGVkID0gQm9vbGVhbihzdGF0dXMpO1xuXG4gICAgICAgIC8vIERlbGVnYXRlIHN0YXR1cyB0byBDU1MgYXMgd2VsbFxuICAgICAgICAkcm9vdC5jbGFzc0xpc3RbdGhpcy5lbmFibGVkID8gXCJhZGRcIiA6IFwicmVtb3ZlXCJdKFwiZGVidWctbW9kZVwiKTtcblxuICAgICAgICAvLyBJZiBsb2NhbFN0b3JhZ2UgaXMgYXZhaWxhYmxlLCB3cml0ZSB0aGUgY3VycmVudCBzdGF0dXMgaW50byBpdC4gTm90ZSB0aGF0IGEgZmFrZSBzdG9yZSBpcyB1c2VkIGlmXG4gICAgICAgIC8vIGl0IGlzIG5vdCBhdmFpbGFibGVcbiAgICAgICAgc3RvcmUuc2V0KFwiZGVidWdcIiwgdGhpcy5lbmFibGVkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3RzIGZyb20gdGhlIGN1cnJlbnQgcmVxdWVzdCB1cmwgaWYgZGVidWdnaW5nIGlzIGVuYWJsZWQgb3Igbm90LCBpZlxuICAgICAqIHRoZXJlIGlzIG5vdGhpbmcgZGVmaW5lZCB3aXRoaW4gdGhlIHJlcXVlc3QgaXQgd2lsbCBjaGVjayB0aGVcbiAgICAgKiBsb2NhbFN0b3JhZ2UgZm9yIGFueSBkYXRhLlxuICAgICAqL1xuICAgIHB1YmxpYyBkZXRlY3QoKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gd2luZG93LmxvY2F0aW9uLmhyZWYubWF0Y2goL2RlYnVnPShcXGR8dHJ1ZXxmYWxzZSkvaSk7XG5cbiAgICAgICAgLy8gVHJ5IHRvIGdldCBkZWJ1Z2dpbmcgc3RhdHVzIGZyb20gbG9jYWxTdG9yYWdlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IEpTT04ucGFyc2Uoc3RvcmUuZ2V0KFwiZGVidWdcIikpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV2UgaGF2ZSBhIG5ldyBzdGF0dXMsIG92ZXJyaWRlIGl0XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXMgPT09IFwiMVwiIHx8IHN0YXR1cyA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMb2dzIGEgbWVzc2FnZSB0byB0aGUgY2xpZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIG1lc3NhZ2UgdG8gbG9nLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0eXBlSWRcbiAgICAgKi9cbiAgICBwdWJsaWMgbG9nKG1lc3NhZ2U6IHN0cmluZywgdHlwZUlkOiBudW1iZXIgPSBEZWJ1Z2dlclNlcnZpY2UuQ09SRSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcbiAgICAgICAgY29uc3Qgc3R5bGVzID0gW107XG5cbiAgICAgICAgLy8gUHJpbWl0aXZlIHR5cGUgZ2l2ZW4/IFBpY2sgY29ycmVjdCB0eXBlIG9iamVjdCBmcm9tIHR5cGVzIHRhYmxlXG4gICAgICAgIGNvbnN0IHR5cGUgPSBEZWJ1Z2dlclNlcnZpY2UuVFlQRVt0eXBlSWRdO1xuXG4gICAgICAgIC8vIEVtb2ppXG4gICAgICAgIG91dHB1dC5wdXNoKGAlYyR7dHlwZS5lbW9qaX1gKTtcbiAgICAgICAgc3R5bGVzLnB1c2goW1wibWFyZ2luOiAwIDEwcHggMCAtMS41ZW1cIl0uam9pbihcIjtcIikpO1xuXG4gICAgICAgIC8vIC8vIElmIHRoZXJlIGlzIGEgbGFiZWwgZ2l2ZW4sIGFkZCBpdFxuICAgICAgICAvLyBpZiAob3B0aW9ucy5sYWJlbCkge1xuICAgICAgICAvLyAgICAgb3V0cHV0LnB1c2goYCVjWyR7b3B0aW9ucy5sYWJlbH1dYCk7XG4gICAgICAgIC8vICAgICBzdHlsZXMucHVzaChbXCJtYXJnaW4tcmlnaHQ6IDZweFwiLCBcImZvbnQtd2VpZ2h0OiBib2xkXCIsIFwidGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZVwiXS5qb2luKFwiO1wiKSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyBNZXNzYWdlXG4gICAgICAgIG91dHB1dC5wdXNoKGAlYyR7bWVzc2FnZX1gKTtcbiAgICAgICAgc3R5bGVzLnB1c2goW1wiZm9udC13ZWlnaHQ6IG5vcm1hbFwiLCBcInRleHQtdHJhbnNmb3JtOiBub25lXCJdLmpvaW4oXCI7XCIpKTtcblxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgY29uc29sZS5sb2cob3V0cHV0LmpvaW4oXCJcIiksIC4uLnN0eWxlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9ncyBhIHdhcm5pbmcgdG8gdGhlIGNsaWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKiBAcGFyYW0ge29iamVjdHxudW1iZXJ9IG9wdGlvbnMgT3B0aW9uYWwgb3B0aW9ucyBmb3IgY2hhbmdpbmcgdGhlIHdheSBvZiBsb2dnaW5nLlxuICAgICAqL1xuICAgIHB1YmxpYyB3YXJuKG1lc3NhZ2U6IHN0cmluZywgb3B0aW9ucyA9IERlYnVnZ2VyU2VydmljZS5XQVJOSU5HKSB7XG4gICAgICAgIHRoaXMubG9nKG1lc3NhZ2UsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvZ3MgYW4gZXJyb3IgdG8gdGhlIGNsaWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIGxvZy5cbiAgICAgKiBAcGFyYW0ge29iamVjdHxudW1iZXJ9IG9wdGlvbnMgT3B0aW9uYWwgb3B0aW9ucyBmb3IgY2hhbmdpbmcgdGhlIHdheSBvZiBsb2dnaW5nLlxuICAgICAqL1xuICAgIHB1YmxpYyBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIG9wdGlvbnMgPSBEZWJ1Z2dlclNlcnZpY2UuRVJST1IpIHtcbiAgICAgICAgdGhpcy5sb2cobWVzc2FnZSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBUWVBFKCkge1xuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgIGVtb2ppOiBcIu2gvO29j1wiLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBlbW9qaTogXCLtoLztvrJcIixcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgZW1vamk6IFwi7aC97bSlXCIsXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGVtb2ppOiBcIuKaoO+4j1wiLFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBlbW9qaTogXCLtoL3tsY3toLztv7tcIixcbiAgICAgICAgfV07XG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBDT1JFKCkgeyByZXR1cm4gMDsgfVxuICAgIC8vIHN0YXRpYyBnZXQgQ09NUE9ORU5UKCkgeyByZXR1cm4gMTsgfVxuICAgIHN0YXRpYyBnZXQgRVJST1IoKSB7IHJldHVybiAyOyB9XG4gICAgc3RhdGljIGdldCBXQVJOSU5HKCkgeyByZXR1cm4gMzsgfVxuICAgIC8vIHN0YXRpYyBnZXQgU1VDQ0VTUygpIHsgcmV0dXJuIDQ7IH1cbn1cbi8vIHRzbGludDplbmFibGVcbiJdfQ==